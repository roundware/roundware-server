<VirtualHost *:80>
  ServerAdmin webmaster@localhost

  ServerName roundware-server
  DocumentRoot /home/ubuntu/roundware-server/roundware/
  Alias /media /usr/pythonenv/roundware-server/lib/python2.7/site-packages/django/contrib/admin/media
  Alias /audio /var/www/rwaudio
  Alias /static /home/ubuntu/roundware-server/static

  RewriteEngine On
  RewriteRule ^/(audio.*)$ /$1 [QSA,L,PT]
  RewriteRule ^/(media.*)$ /$1 [QSA,L,PT]
  RewriteRule ^/(static.*)$ /$1 [QSA,L,PT]
  RewriteCond %{REQUEST_FILENAME} !-f

  <Directory />
    Options FollowSymLinks
    AllowOverride None
  </Directory>

  <Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
  </Directory>

  <Directory /home/ubuntu/roundware-server/roundware/>
    Order allow,deny
    allow from all
  </Directory>

  ErrorLog /var/log/apache2/error.log

  # Possible values include: debug, info, notice, warn, error, crit,
  # alert, emerg.
  LogLevel warn

  CustomLog /var/log/apache2/access.log combined

  <Directory /home/ubuntu/roundware-server/files/>
    Order allow,deny
    allow from all
  </Directory>

  WSGIDaemonProcess roundware user=ubuntu group=ubuntu umask=002
  WSGIApplicationGroup %{GLOBAL}
  WSGIProcessGroup roundware
  WSGIScriptAlias / /home/ubuntu/roundware-server/files/roundware.wsgi

</VirtualHost>

